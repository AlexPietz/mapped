<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"> 
	<title>mappED</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/custom.css">
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
	<script type="text/javascript" src="scripts/jquery.sticky.js"></script>
	<script type="text/javascript">
		$(window).load(function(){
			$("#map").sticky({ topSpacing: 0 });
		});
	</script>
	<script type="text/javascript">
		var thisApp = angular.module('app', []);
		thisApp.controller('BuildingCtrl', function ($scope, $http){
			$http.get('data2.json').success(function(data2) {
				$scope.Buildings = data2;
				console.log(data2);
			for (var i =0; i< data2.length; i++) {
				data2[i].id = i;
				};
			$scope.addmarker = function(x,y, name) { var marker = L.marker([x, y]).addTo(map); marker.bindPopup("I am "+name).openPopup(); map.setView([x,y], 18);};
			});
		});
	</script>
	<script src="scripts/toTop.js" charset="utf-8"></script>

</head>
<body>
	<script type="text/javascript">
		$('body').toTop({
			css: { //  CSS styles for the scroll to top button
			position: "fixed",
			right: '2rem',
			bottom: '1rem',
			fontSize: '4rem',
			cursor: 'pointer',
			color: '#1e1e1e'
		},
			symbol: '&#8963;', // text for the scroll to top button
			scrollUpSpeed: 2000,	// animation speed for the scrolling effect
			triggerHeight: 250	// distance from top of the webpage to trigger the plugin
		});
	</script>
	<div ng-app="app" ng-init="searchT=''">  
		<!-- TOP Container START-->   
		<div class="container-fluid" style="background-color:#F44336;color:#fff;height:20%;padding:3%">
		<div class="container" style="width:90%";>
				<div class="col-sm-3">
				<img class="img" src="logo.png" alt="logo" style="height:250px">
				</div>
				<div class="col-sm-6">
					<img class="img" src="logo1.png" alt="logo1" style="height:90px;padding-bottom:10px;">
					<div id="custom-search-input">
						<div class="input-group col-sm-12">
							<span class="input-group-btn" id="collapsebutton">
								<button class="btn btn-info btn-lg" data-toggle="collapse" data-target="#collapseDivOptions" ng-click="collapseState[$index]= !collapseState[$index]">
									<span class="glyphicon" id="servicedrop"  ng-class="collapseState[$index] ? 'glyphicon glyphicon-menu-down' : 'glyphicon glyphicon-menu-right'"></span>
								</button>
							</span>
							<input type="text" class="form-control input-lg" placeholder="Search" ng-model="searchT" />
							<span class="input-group-btn">
								<button class="btn btn-info btn-lg" type="button">
									<i id="searchbutton" class="glyphicon glyphicon-search"></i>
								</button>
							</span>
						</div>
						<div class="collapse" id="collapseDivOptions" ng-model="collapseState">
							<div class="checkbox">
								<label><input type="checkbox" value="">Computers</label>
							</div>
							<div class="checkbox">
								<label><input type="checkbox" value="">Silent Study</label>
							</div>
							<div class="checkbox">
								<label><input type="checkbox" value="">???</label>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- TOP Container START--> 

		<!-- Map START--> 
		<div id="map" class="img-responsive" data-spy="affix" data-offset-top="250"> </div>
		<script>  var map = L.map('map').setView([55.943,-3.18], 13); //initialize map
			map.scrollWheelZoom.disable();
			L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { // create the tile layer with correct attribution
				attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
			}).addTo(map);
		</script>
		<!-- Map END--> 


		<div class="container"> <!-- Placeholder--> 
			<div class="col-xs-12" style="height:50px;"></div>
		</div>									<!-- /Placeholder--> 


		<div ng-controller="BuildingCtrl">
		<div class="container-fluid" ng-repeat="Building in Buildings | filter:searchT">
			<div class="panel-group">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h1 class="panel-title">
							<a data-toggle="collapse" href="#collapse{{Building.id}}" ng-click="addmarker(Building.latitude, Building.longitude, Building.name)">{{Building.name}} </a>
						</h1>
					</div>
					<div id="collapse{{Building.id}}" class="panel-collapse collapse">
						<div class="panel-body">
							<a id="myLink" href="#" ng-click="addmarker(Building.latitude, Building.longitude)">ef marker</a>
							{{Building.address}}

							<img src= "{{Building.image}}"  class = "img-thumbnail"> 

							<div class="col-xs-12" style="height:200px;"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</div>
</body>
</html>